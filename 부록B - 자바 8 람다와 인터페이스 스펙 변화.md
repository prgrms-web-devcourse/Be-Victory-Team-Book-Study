# λ¶€λ΅B - μλ°” 8 λλ‹¤μ™€ μΈν„°νμ΄μ¤ μ¤ν™ λ³€ν™”

## λλ‹¤κ°€ λ„μ…λ μ΄μ 

ν”„λ΅κ·Έλλ¨Έλ“¤μ—κ² λΉ…λ°μ΄ν„°λ¥Ό ν”„λ΅κ·Έλ¨μ μΌλ΅ λ‹¤λ£° μ μλ” λ°©λ²•μ΄ ν•„μ”ν•΄μ΅λ‹¤. κ·Έλμ„ λ©€ν‹° μ½”μ–΄λ¥Ό ν™μ©ν• λ¶„μ‚° μ²λ¦¬ μ¦‰, λ³‘λ ¬ν™” κΈ°μ μ΄ ν•„μ”ν•΄μ΅λ‹¤.

μλ°”8μ—μ„λ” λ³‘λ ¬ν™”λ¥Ό μ„ν•΄ μ»¬λ ‰μ…(λ°°μ—΄, List, Set, Map)μ„ κ°•ν™”ν–κ³ , μ΄λ¬ν• μ»¬λ ‰μ…μ„ λ” ν¨μ¨μ μΌλ΅ μ‚¬μ©ν•κΈ° μ„ν•΄ μ¤νΈλ¦Όμ„ κ°•ν™”ν–λ‹¤. λ μ¤νΈλ¦Όμ„ ν¨μ¨μ μΌλ΅ μ‚¬μ©ν•κΈ° μ„ν•΄ ν•¨μν• ν”„λ΅κ·Έλλ°μ΄, λ ν•¨μν• ν”„λ΅κ·Έλλ°μ„ μ„ν•΄ λλ‹¤κ°€, λ λλ‹¤λ¥Ό μ„ν•΄ μΈν„°νμ΄μ¤μ λ³€ν™”κ°€ μλ°λλ‹¤.

λλ‹¤λ¥Ό μ§€μ›ν•κΈ° μ„ν• μΈν„°νμ΄μ¤λ¥Ό ν•¨μν• μΈν„°νμ΄μ¤λΌκ³  ν•λ‹¤.

<aside>
βπ» λΉ…λ°μ΄ν„° μ§€μ› β†’ λ³‘λ ¬ν™” κ°•ν™” β†’ μ»¬λ ‰μ… κ°•ν™” β†’ μ¤νΈλ¦Ό κ°•ν™” β†’ λλ‹¤ λ„μ… β†’ μΈν„°νμ΄μ¤ λ…μ„Έ λ³€κ²½ β†’ ν•¨μν• μΈν„°νμ΄μ¤ λ„μ…

</aside>

## λλ‹¤λ€ λ¬΄μ—‡μΈκ°€?

**λλ‹¤ = μ½”λ“ λΈ”λ΅**

κΈ°μ΅΄μ μ½”λ“ λΈ”λ΅μ€ λ°λ“μ‹ λ©”μ„λ“ λ‚΄μ— μ΅΄μ¬ν•΄μ•Ό ν–μ§€λ§ μλ°”8λ¶€ν„°λ” μ½”λ“ λΈ”λ΅μ„ λ©”μ„λ“μ μΈμλ‚ λ°ν™κ°’μΌλ΅ μ‚¬μ©ν•  μ μκ² λλ‹¤. μ΄κ²ƒμ μλ―Έλ” μ½”λ“ λΈ”λ΅μ„ λ³€μμ²λΌ μ‚¬μ©ν•  μ μλ‹¤λ” κ²ƒμ΄λ‹¤.

```java
public class B001 {
	public static void main(String[] args) {
		MyTest mt = new MyTest();
	
		Runnable r = mt;
	
		r.run();
	}
}
class MyTest implements Runnable {
	public void run() {
		System.out.println("Hello Lambda~");
	}
}
```

```java
public static void main(String[] args) {
	Runnable r = new Runnable() {
		public void run() {
			System.out.println("Hello Lambda~");
		}
	};
	r.run();
}
```

```java
public static void main(String[] args) {
	Runnable r = () -> {
		System.out.println("Hello Lambda~");
	};
	// ν• μ¤„μ΄λ©΄ {} μƒλµ κ°€λ¥
	// Runnable r = () -> System.out.println("Hello Lambda~");
	
	r.run();
}
```

Runnable νƒ€μ…μΌλ΅ μ°Έμ΅° λ³€μ rμ„ λ§λ“¤κ³  μμΌλ―€λ΅ new Runnable()μ€ μ»΄νμΌλ¬κ°€ μ•μ•„λ‚Ό μ μκΈ° λ•λ¬Έμ— μƒλµμ΄ κ°€λ¥ν•λ‹¤.

λν• Runnable μΈν„°νμ΄μ¤κ°€ κ°€μ§„ μ¶”μƒ λ©”μ„λ“κ°€ run() ν•λ‚λ°–μ— μ—†κΈ° λ•λ¬Έμ— μ΄ λν• μƒλµμ΄ κ°€λ¥ν•λ‹¤.

<aside>
βπ» λλ‹¤μ κµ¬μ΅° : (μΈμ λ©λ΅) β†’ { λ΅μ§ }

</aside>

## ν•¨μν• μΈν„°νμ΄μ¤

μ„μ—μ„ μμ‹λ΅ λ“  Runnableμ²λΌ μ¶”μƒ λ©”μ„λ“λ¥Ό ν•λ‚λ§ κ°–λ” μΈν„°νμ΄μ¤λ¥Ό ν•¨μν• μΈν„°νμ΄μ¤λΌκ³  ν•λ‹¤. μ΄λ° ν•¨μν• μΈν„°νμ΄μ¤λ§ λλ‹¤μ‹μΌλ΅ λ³€κ²½ν•  μ μλ‹¤.

```java
public class B005 {
	public static void main(String[] args) {
		MyFunctionalInterface mfi = (int a) -> { return a*a; };
		// MyFunctionalInterface mfi = a -> a*a;
		int result = mfi.runSomthing(5); // 25
	}
}

@FunctionalInterface
interface MyFunctionalInterface {
	public abstract int runSomething(int count);
}
```

@FunctionalInterface μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μΌλ©΄ μ»΄νμΌλ¬κ°€ μΈν„°νμ΄μ¤κ°€ λ‹¨ ν•λ‚μ μ¶”μƒ λ©”μ„λ“λ¥Ό κ°€μ§€κ³  μλ”μ§€ ν™•μΈν•λ‹¤.

### κ°„μ†ν™”

- int aμ— aλ” λ©”μ„λ“ μ •μμ— μν•΄μ„ intμΌ μ λ°–μ— μ—†κΈ° λ•λ¬Έμ— μƒλµ κ°€λ¥ β‡’ νƒ€μ… μ¶”μ • κΈ°λ¥
- μΈμκ°€ ν•λ‚μ΄κ³  μλ£ν•μ„ ν‘κΈ°ν•μ§€ μ•λ” κ²½μ° μ†κ΄„νΈ μƒλµ κ°€λ¥
- μ½”λ“κ°€ ν• μ¤„μΈ κ²½μ° μ¤‘κ΄„νΈ μƒλµ κ°€λ¥, μ΄ λ• returnλ„ κ°™μ΄ μƒλµ

## λ©”μ„λ“ νΈμ¶ μΈμλ΅ λλ‹¤ μ‚¬μ©

λλ‹¤μ‹μ„ λ©”μ„λ“μ μΈμλ΅λ„ μ‚¬μ©ν•  μ μλ‹¤.

```java
public class B007 {
	public static void main(String[] args) {
		MyFunctionalInterface mfi = a -> a*a;
		doIt(mfi);
	}

	public static void doIt(MyFunctionalInterface mfi) {
		int result = mfi.runSomething(5); // 25		
	}
}

@FunctionalInterface
interface MyFunctionalInterface {
	public abstract int runSomething(int count);
}
```

```java
public class B008 {
	public static void main(String[] args) {
		doIt(a -> a*a);
	}

	public static void doIt(MyFunctionalInterface mfi) {
		int result = mfi.runSomething(5); // 25		
	}
}

@FunctionalInterface
interface MyFunctionalInterface {
	public abstract int runSomething(int count);
}
```

## λ©”μ„λ“ λ°ν™κ°’μΌλ΅ λλ‹¤ μ‚¬μ©

```java
public class B009 {
	public static void main(String[] args) {
		MyFunctionalInterface mfi = todo();
		int result = mfi.runSomething(3);
	}

	public static MyFunctionalInterface todo() {
		return num -> num*num;
	}
}

@FunctionalInterface
interface MyFunctionalInterface {
	public abstract int runSomething(int count);
}
```

## μλ°”8 APIμ—μ„ μ κ³µν•λ” ν•¨μν• μΈν„°νμ΄μ¤

μ‚¬μ©μ μ •μ ν•¨μν• μΈν„°νμ΄μ¤λ§κ³ λ„ μ΄λ―Έ λ§μ΄ μ‚¬μ©λ  κ²ƒμ΄λΌκ³  μμƒλλ” ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό java.util.function ν¨ν‚¤μ§€μ™€ λ‹¤λ¥Έ μ—¬λ¬ ν¨ν‚¤μ§€μ—μ„ μ κ³µν•κ³  μλ‹¤.

[](https://docs.oracle.com/javase/8/docs/api/)

[java.util.function package](https://www.notion.so/e250b2ce7fd842e8bb2e390da2bc4664)

## μ»¬λ ‰μ… μ¤νΈλ¦Όμ—μ„ λλ‹¤ μ‚¬μ©

λλ‹¤λ” μ»¬λ ‰μ… μ¤νΈλ¦Όμ„ μ„ν• κΈ°λ¥μ— ν¬κ² μ΄μ μ΄ λ§μ¶°μ Έ μλ‹¤.

```java
public static void main(String[] args) {
	Integer[] ages = {20, 19, 18, 17, 35};
	Arrays.stream(ages)
		.filter(age -> age < 20)
		.forEach(age -> System.out.format("Age %d Cant't enter\n", age));
		//  forEach : μ¤νΈλ¦Ό λ‚΄λ¶€ λ°λ³µ μ‹¤ν–‰
}
```

Arrays ν΄λμ¤μ stream()μ„ μ‚¬μ©ν•΄μ„ κΈ°μ΅΄ λ°°μ—΄μ„ μ¤νΈλ¦ΌμΌλ΅ λ³€κ²½

### μ¤νΈλ¦Ό λ©”μ†λ“

1. **ν•„ν„°λ§**
    
    μ¤‘κ°„μ²λ¦¬ κΈ°λ¥μΌλ΅ μ”μ†λ¥Ό κ±Έλ¬λ‚΄λ” μ—­ν• 
    
    - distinct() : μ¤‘λ³µμ„ μ κ±°ν•λ” λ©”μ†λ“
    - filter() : λ§¤κ°κ°’μΌλ΅ μ£Όμ–΄μ§„ Predicate κ°μ²΄κ°€ trueλ¥Ό λ°ν™ν•λ” μ”μ†λ§ ν•„ν„°
2. **λ§¤ν•‘**
    
    μ¤‘κ°„μ²λ¦¬ κΈ°λ¥μΌλ΅ μ¤νΈλ¦Όμ μ”μ†λ¥Ό λ‹¤λ¥Έ μ”μ†λ΅ λ€μ²΄ν•λ” μ‘μ—…μ„ ν•λ‹¤.
    
    flatXXX() μ™€ mapXXX() κ·Έλ¦¬κ³  asDoubleStream(), asLongStream(), boxed() λ©”μ†λ“κ°€ μλ‹¤.
    
    - flatXXX() : μ”μ†λ¥Ό λ€μ²΄ν•λ” λ³µμκ°μ μ”μ†λ“¤λ΅ κµ¬μ„±λ μƒλ΅μ΄ μ¤νΈλ¦Όμ„ λ¦¬ν„΄
        
        ```java
        List<String> input1 = Arrays.asList("java8 lambda","stream mapping");
        input1.stream()
        	.flatMap(data -> Arrays.stream(data.split(" ")))
        	.forEach(System.out::println);
        
        // java8
        // lambda
        // stream
        // mapping
        ```
        
    - mapXXX() : μ”μ†λ¥Ό λ€μ²΄ν•λ” μ”μ†λ΅ κµ¬μ„±λ μƒλ΅μ΄ μ¤νΈλ¦Ό λ¦¬ν„΄
    - boxed() : primitive νƒ€μ…μ„ wrapper νƒ€μ…μΌλ΅ λ°•μ‹±ν•μ—¬ λ°ν™ν•λ‹¤.

μ»¬λ ‰μ… μ¤νΈλ¦Όμ„ μ΄μ©ν•λ©΄μ„ ν•¨μν• ν”„λ΅κ·Έλλ°μ μ¥μ μΈ μ„ μ–Έμ  ν”„λ΅κ·Έλλ°μ„ ν™μ©ν•κ² λλ‹¤.

```java
// λ…λ Ήν•(how) : μ–΄λ–»κ²
for(int i=0; i<arr.length; i++) {
	arr[i] *= 2;
}
// μ„ μ–Έν•(what) : λ¬΄μ—‡μ„
arr.map((item)->item*2);
```

μμ‚¬μ†ν†µ λ‚΄μ© μμ²΄κ°€ κ·Έλ€λ΅ μ½”λ“λ΅ κµ¬ν„λλ” κ²ƒμ΄ μ„ μ–Έμ  ν”„λ΅κ·Έλλ°μ μ¥μ μ΄λ‹¤.

μ¤νΈλ¦Όμ€ λ©”μ„λ“ μ²΄μΈ ν¨ν„΄μ„ μ΄μ©ν•΄ μµμΆ… μ—°μ‚°μ΄ μ•„λ‹ λ¨λ“  μ¤‘κ°„ μ—°μ‚°μ€ λ‹¤μ‹ μ¤νΈλ¦Όμ„ λ°ν™ν•΄ μ½”λ“λ¥Ό κ°„λµν•κ² μ‘μ„±ν•  μ μλ‹¤.

## λ©”μ„λ“ λ νΌλ°μ¤μ™€ μƒμ„±μ λ νΌλ°μ¤

λ©”μ„λ“,μƒμ„±μ λ νΌλ°μ¤λ” ν•¨μμ μ¶•μ•½ν•μΌλ΅ λ…μ‹μ μΌλ΅ λ©”μ„λ“λ¥Ό μ°Έμ΅°ν•¨μΌλ΅μ¨ κ°€λ…μ„±μ„ λ†’μ΄κ³ , λλ‹¤λ¥Ό νΈλ¦¬ν•κ² μ‚¬μ©ν•  μ μκ² ν•΄μ¤€λ‹¤.

λ©”μ„λ“, μƒμ„±μΒ λ νΌλ°μ¤λ” λ©”μ„λ“λ… μ•μ—Β **κµ¬λ¶„μ(::)**λ¥Ό λ¶™μ΄λ” λ°©μ‹μΌλ΅ μ‚¬μ©ν•λ‹¤.

### **λ©”μ„λ“ λ νΌλ°μ¤ (3κ°€μ§€ μ ν•)**

- μΈμ¤ν„΄μ¤::μΈμ¤ν„΄μ¤λ©”μ„λ“
    
    μΈμ¤ν„΄μ¤ λ©”μ„λ“μ μΈμκ°€ λλ‹¤!
    
    ```java
    sqrtNum -> System.out.println(sqrtNum)
    System.out::println
    ```
    
- ν΄λμ¤::μ •μ λ©”μ„λ“
    
    μ •μ  λ©”μ„λ“μ μΈμκ°€ λλ‹¤!
    
    ```java
    num -> Math.sqrt(num)
    Math::sqrt
    ```
    
- ν΄λμ¤::μΈμ¤ν„΄μ¤λ©”μ„λ“
    
    μ²« λ²μ§Έ μΈμλ” μΈμ¤ν„΄μ¤κ°€ λκ³  κ·Έ λ‹¤μ μΈμ(λ“¤)μ€ μΈμ¤ν„΄μ¤ λ©”μ„λ“μ μΈμ(λ“¤)κ°€ λλ‹¤!
    
    ```java
    (a, b) -> a.compareTo(b)
    Integer::compareTo
    ```
    

### **μƒμ„±μ λ νΌλ°μ¤**

ν΄λμ¤λ…κ³Ό new ν‚¤μ›λ“λ¥Ό μ΄μ©ν•΄μ„ κΈ°μ΅΄ μƒμ„±μμ λ νΌλ°μ¤λ¥Ό λ§λ“¤ μ μλ‹¤.

```java
// μΈμκ°€ μ—†λ” μƒμ„±μ
Supplier<Car> f1 = Car::new;
Car car = f1.get();

// μΈμκ°€ ν•λ‚μΈ μƒμ„±μ
Function<Integer, Car> f2  = Car::new;
Car car2 = f2.apply(100);

// μΈμκ°€ λ‘κ°μΈ μƒμ„±μ
BiFunction<String, Integer, Car> f3 = Car::new;
Car car3 = f3.apply("bmw", 1000);
```

κΈ°λ³Έ μƒμ„±μ μ™Έμ λ‹¤λ¥Έ μƒμ„±μκ°€ μλ” κ²½μ°λΌλ©΄ κ·Έμ— λ§λ” ν•¨μν• μΈν„°νμ΄μ¤ μ°Έμ΅° λ³€μλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.

## μΈν„°νμ΄μ¤μ λ””ν΄νΈ λ©”μ„λ“μ™€ μ •μ  λ©”μ„λ“

ν•¨μν• μΈν„°νμ΄μ¤ μ¤‘ ν•λ‚μΈ [Function<T, R>](https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html)

μλ°”8 μ΄μ „μ— μΈν„°νμ΄μ¤λ” μ •μ  μƒμ, μ¶”μƒ μΈμ¤ν„΄μ¤ λ©”μ„λ“λ§ κ°€μ§ μ μμ—λ”λ° μλ°”8 μ΄ν›„μ—λ” **κµ¬μ²΄ μΈμ¤ν„΄μ¤ λ©”μ„λ“(λ””ν΄νΈ λ©”μ„λ“)**μ™€ **(κµ¬μ²΄)μ •μ  λ©”μ„λ“**λ¥Ό κ°€μ§ μ μλ‹¤.

```java
@FunctionalInterface
interface MyFunctionalInterface2 {
	// μ •μ  μƒμ
	public static final int constant = 1;

	// μ¶”μƒ μΈμ¤ν„΄μ¤ λ©”μ„λ“
	public abstract void abstractInstanceMethod();

	// JAVA 8 λ””ν΄λ“ λ©”μ„λ“ - κµ¬μ²΄ μΈμ¤ν„΄μ¤ λ©”μ„λ“
	public default void concreteInstanceMethod() {
		System.out.println("default method");
	}

	// JAVA 8 μ •μ  λ©”μ„λ“ - κµ¬μ²΄ μ •μ  λ©”μ„λ“
	public static void concreteStaticMethod() {
		System.out.println("static method");
	}
}
```

λ³‘λ ¬ν™”λ¥Ό μ„ν•΄ μ»¬λ ‰μ… APIλ¥Ό κ°•ν™”ν•λ©΄μ„ μ»¬λ ‰μ…μ κ³µν†µ μ΅°μƒμΈ Collectionμ μνΌ μΈν„°νμ΄μ¤μΈ Iterable μΈν„°νμ΄μ¤μ—λ” λ§μ€ λ³€ν™”κ°€ ν•„μ”ν–λ‹¤. κ·Έλ°λ° μΈν„°νμ΄μ¤μ— λ³€ν™”λ¥Ό μ£Όκ² λλ©΄ κΈ°μ΅΄μ— ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• λ¨λ“  μ‚¬μ©μ μ •μ ν΄λμ¤λ” μ΄λ¥Ό μ¶”κ°€μ μΌλ΅ κµ¬ν„ν•΄μ•Όν•κΈ° λ•λ¬Έμ— λ””ν΄νΈ λ©”μ„λ“λΌλ” μƒλ΅μ΄ κ°λ…μ„ μΈν„°νμ΄μ¤ μ¤ν™μ— μ¶”κ°€ν• κ²ƒμ΄λ‹¤. λ”°λΌμ„ κΈ°μ΅΄μ— μ‘μ„±ν• ν”„λ΅κ·Έλ¨λ“¤λ„ μ κµ¬λ™λ  μ μλ‹¤.

## μ •λ¦¬

### parallelStream()

λ³‘λ ¬ν™” μ§€μ›μ„ μ„ν•΄ μ¤νΈλ¦Όμ„ μ‚¬μ©ν•λ‹¤κ³  ν–λ”λ° stream()λ€μ‹  parallelStream()μ„ μ‚¬μ©ν•λ©΄ μ¤νΈλ¦Ό μ‘μ—…μ„ λ³‘λ ¬λ΅ μ²λ¦¬ν•  μ μλ‹¤. μ‚¬μ©μ€ κ°„λ‹¨ν•μ§€λ§, λ…λ¦½μ μΌλ΅ μ‹¤ν–‰λλ” μ–΄ν”λ¦¬μΌ€μ΄μ…μ΄ μ•„λ‹λΌλ©΄ μ„±λ¥ μ¥μ• κ°€ μμ„ μλ„ μμΌλ‹ μ‘μ—…μ΄ λ…λ¦½μ μ΄λ©΄μ„ CPUμ‚¬μ©μ΄ λ†’μ€ μ‘μ—…μ— μ ν•©ν•λ‹¤.

### λλ‹¤μ™€ ν΄λ΅μ €?

λλ‹¤μ™€ ν΄λ΅μ €λ” λ¨λ‘ μµλ…μ νΉμ • κΈ°λ¥ λΈ”λ΅μΈλ° μ°¨μ΄μ μ€ ν΄λ΅μ €λ” μ™Έλ¶€ λ³€μλ¥Ό μ°Έμ΅°ν•κ³ , λλ‹¤λ” λ§¤κ°λ³€μλ§ μ°Έμ΅°ν•λ‹¤λ” κ²ƒ.

```java
// Lambda.
(server) -> server.isRunning();

// Closure. μ™Έλ¶€μ serverλΌλ” λ³€μλ¥Ό μ°Έμ΅°
() -> server.isRunning();
```

ν΄λ΅μ €λ” μ™Έλ¶€μ— μμ΅΄μ„±μ΄ μκ³ , λλ‹¤λ” μ™Έλ¶€μ— μμ΅΄μ„±μ΄ μ—†λ” μ¤νƒν‹± λ©”μ†λ“μ™€ λΉ„μ·ν•λ‹¤.

λλ‹¤λ” ν΄λ΅μ €λ¥Ό ν¬ν•¨ν•λ” λ” ν° κ°λ…μ΄λΌκ³  λ³Ό μ μλ‹¤. λλ‹¤κ°€ μμ‹ μ λ²”μ„ λ°–μ— μλ” λ³€μλ¥Ό μ‚¬μ©ν•λ©΄ κ·Έκ²ƒμ€ λλ‹¤μΈ λ™μ‹μ— ν΄λ΅μ €!

## Reference

[https://sas-study.tistory.com/242?category=769494](https://sas-study.tistory.com/242?category=769494)

[https://codechaser.tistory.com/81](https://codechaser.tistory.com/81)

[https://digitalbourgeois.tistory.com/48](https://digitalbourgeois.tistory.com/48)